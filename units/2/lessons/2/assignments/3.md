[//]: <> (author: Joe Turner)
[//]: <> (type: code along)
[//]: <> (time: 60)

# Using requests to query the GitHub API

In this lesson we will be applying what you've learned in the previous two assignments to create an application which uses the GitHub API.  The application will look at the programming languages used in a user's repositories and work out what percentage of their code is written in each language.

## Getting a list of repositories

To get started let's set up a new project.  Create a folder called *github_languages* and `cd` into it.  Then set up a git repository for the project using `git init`.

Our first challenge is to use the `requests` library to access the GitHub API and get a list of a user's repositories.  Fortunately the API has an endpoint for doing exactly this.  Take a quick look at the [documentation for the endpoint](https://developer.github.com/v3/repos/#list-user-repositories).  You can see that the endpoint expects a GET request to `/users/<user>/repos`.  So let's try that out just to double check that it works how we expect.  Open up a browser and navigate to https://api.github.com/users/YOUR_USERNAME_HERE/repos.  You should see a list containing data on of all of your repositories in JSON format.

Now let's try to access the same resource but using the requests library.  In a file called *github_languages.py* add the following code:

```python
import sys

import requests

def get_repositories(user):
    """ Retreive a list of a user's repositories """
    url = "https://api.github.com/users/{user}/repos".format(user=user)
    response = requests.get(url)
    return response.json()

def main():
    """ Main function """
    repositories = get_repositories(sys.argv[1])
    print repositories

if __name__ == "__main__":
    main()
```

Here we create a `get_repositories` function which takes a GitHub username as an argument.  We use the username to construct the url using the string `format` method.  Next we use the `requests.get` function to make the GET request to the endpoint.  Finally we use the `json` method of the response to parse the JSON and return it as a Python list.

We also set up a `main` function which simple calls our function using the first command line argument, and prints the returned data.  We call the `main` function from the main block of the script.

Try running the program using `python github_languages.py YOUR_GITHUB_USERNAME`.  The data printed should be the same as what you saw in the browser earlier.

Before we move on, now would be a good time to commit your work to your Git repository.

## Identifying yourself

## Getting the languages

## Displaying the languages


## Comprehension Check

1. a
2. b
3. c
4. d
5. e
